FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktZHJ1cGFsLWFwYWNoZS1waHA1LW15c3FsCmRlc2Ny\
aXB0aW9uOiBCaXRuYW1pIERydXBhbCB3aXRoIEFwYWNoZSwgUEhQNSBhbmQgTXlTUUwgQW5zaWJs\
ZSBQbGF5Ym9vayBCdW5kbGUKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0\
YToKICBkaXNwbGF5TmFtZTogQml0bmFtaSBEcnVwYWwgd2l0aCBBcGFjaGUsIFBIUDUgYW5kIE15\
U1FMIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhhdC5j\
b20vcmhzY2wvbXlzcWwtNTctcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2FsZ2FyL2JpdG5h\
bWktZHJ1cGFsLXJoZWwtYXBhY2hlLXBocDUnCiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly9k\
b2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL2RydXBhbC8KICBpbWFnZVVybDogaHR0cHM6\
Ly9kMzNucDluMzJqNTNnNy5jbG91ZGZyb250Lm5ldC9hc3NldHMvc3RhY2tzL2RydXBhbC9pbWcv\
ZHJ1cGFsLXN0YWNrLTExMHgxMTctOWY5MzkxMWRhMmYyNjJlYzBhMmU1ZDQ5Y2RiZDU1NmYucG5n\
CiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQK\
ICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIERydXBhbCB3aXRoIHBo\
cC1mcG0gNS42LjM1LCBBcGFjaGUgYW5kIG15c3FsCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0\
YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogZHJ1cGFsX2VtYWlsCiAgICAgICAg\
ZGVmYXVsdDogdXNlckBleGFtcGxlLmNvbQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRp\
dGxlOiBVc2VyIGVtYWlsCiAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgZW1haWwKICAgICAgLSBu\
YW1lOiBkcnVwYWxfdXNlcm5hbWUKICAgICAgICBkZWZhdWx0OiB1c2VyCiAgICAgICAgcGF0dGVy\
bjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHR5cGU6\
IHN0cmluZwogICAgICAgIHRpdGxlOiBEcnVwYWwgYWRtaW4gdXNlcm5hbWUKICAgICAgICBkZXNj\
cmlwdGlvbjogRHJ1cGFsIGFkbWluIHVzZXJuYW1lCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAg\
ICAgLSBuYW1lOiBkcnVwYWxfcGFzc3dvcmQKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlf\
XSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IERydXBhbCBhZG1pbiBwYXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBEcnVwYWwg\
YWRtaW4gcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVx\
dWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBkYl9uYW1lCiAgICAgICAgZGVmYXVsdDogZGF0YWJh\
c2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpb\
YS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIG5hbWUKICAg\
ICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgbmFtZQogICAgICAtIG5hbWU6IGRiX3VzZXIKICAg\
ICAgICBkZWZhdWx0OiBkYnVzZXIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJu\
OiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6\
IERhdGFiYXNlIHVzZXIKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgdXNlcgogICAgICAt\
IG5hbWU6IGRiX3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IERh\
dGFiYXNlIHBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHBhc3N3b3JkCiAg\
ICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAg\
IC0gbmFtZTogdm9sdW1lX3NpemUKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDog\
JzFHaScKICAgICAgICBlbnVtOiBbJzFHaScsICc1R2knLCAnMTBHaSddCiAgICAgICAgdGl0bGU6\
IERhdGFiYXNlIHZvbHVtZSBzaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK"





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
