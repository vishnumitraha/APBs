FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLWFwYWNoZS1waHA1LW15c3FsCmRl\
c2NyaXB0aW9uOiBCaXRuYW1pIFdvcmRQcmVzcyB3aXRoIEFwYWNoZSwgUEhQNSBhbmQgTXlTUUwg\
QW5zaWJsZSBQbGF5Ym9vayBCdW5kbGUKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbApt\
ZXRhZGF0YToKICBkaXNwbGF5TmFtZTogQml0bmFtaSBXb3JkUHJlc3Mgd2l0aCBBcGFjaGUsIFBI\
UDUgYW5kIE15U1FMIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNz\
LnJlZGhhdC5jb20vcmhzY2wvbXlzcWwtNTctcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2Fs\
Z2FyL2JpdG5hbWktd29yZHByZXNzLXJoZWwtYXBhY2hlLXBocDUnCiAgZG9jdW1lbnRhdGlvblVy\
bDogaHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL3dvcmRwcmVzcy8KICBp\
bWFnZVVybDogaHR0cHM6Ly9kN3VtcWljcGk3MjYzLmNsb3VkZnJvbnQubmV0L2ltZy9wcm9kdWN0\
LzdkNDI2Y2I3LTk1MjItNGRkNy1hNTZiLTU1ZGQ4Y2MxYzhkMC9iNzNiOWYwNS0wYTk2LTRjYjEt\
OTEzNi05M2U1ZTc2MzY0ZmIucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFu\
czoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBk\
ZXBsb3lzIFdvcmRQcmVzcyB3aXRoIHBocC1mcG0gNy4yLCBBcGFjaGUgYW5kIG15c3FsCiAgICBm\
cmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTog\
YmxvZ19uYW1lCiAgICAgICAgZGVmYXVsdDogIk15IGJsb2ciCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgdGl0bGU6IEJsb2cgVGl0bGUKICAgICAgICBkZXNjcmlwdGlvbjogVGl0bGUgb2Yg\
eW91ciBibG9nCiAgICAgIC0gbmFtZTogd3BfdXNlcm5hbWUKICAgICAgICBkZWZhdWx0OiB1c2Vy\
CiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSok\
IgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBXb3JkUHJlc3MgYWRtaW4gdXNl\
cm5hbWUKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNzIGFkbWluIHVzZXJuYW1lCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiB3cF9wYXNzd29yZAogICAgICAgIHBhdHRl\
cm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgICB0aXRsZTogV29yZFByZXNzIGFkbWluIHBhc3N3b3JkCiAgICAgICAg\
ZGVzY3JpcHRpb246IFdvcmRQcmVzcyBhZG1pbiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfdHlw\
ZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IGRiX25hbWUK\
ICAgICAgICBkZWZhdWx0OiBkYXRhYmFzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBh\
dHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0\
aXRsZTogRGF0YWJhc2UgbmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBuYW1lCiAg\
ICAgIC0gbmFtZTogZGJfdXNlcgogICAgICAgIGRlZmF1bHQ6IGRidXNlcgogICAgICAgIHR5cGU6\
IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1a\
MC05X10qJCIKICAgICAgICB0aXRsZTogRGF0YWJhc2UgdXNlcgogICAgICAgIGRlc2NyaXB0aW9u\
OiBEYXRhYmFzZSB1c2VyCiAgICAgIC0gbmFtZTogZGJfcGFzc3dvcmQKICAgICAgICB0eXBlOiBz\
dHJpbmcKICAgICAgICB0aXRsZTogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlv\
bjogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiB2b2x1bWVfc2l6ZQogICAgICAgIHR5cGU6\
IGVudW0KICAgICAgICBkZWZhdWx0OiAnMUdpJwogICAgICAgIGVudW06IFsnMUdpJywgJzVHaScs\
ICcxMEdpJ10KICAgICAgICB0aXRsZTogRGF0YWJhc2Ugdm9sdW1lIHNpemUKICAgICAgICByZXF1\
aXJlZDogdHJ1ZQo="





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
