FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktZHJ1cGFsLWFwYWNoZS1waHA1LW1hcmlhZGIKZGVz\
Y3JpcHRpb246IEJpdG5hbWkgRHJ1cGFsIHdpdGggQXBhY2hlLCBQSFA1IGFuZCBNYXJpYURCIEFu\
c2libGUgUGxheWJvb2sgQnVuZGxlCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0\
YWRhdGE6CiAgZGlzcGxheU5hbWU6IEJpdG5hbWkgRHJ1cGFsIHdpdGggQXBhY2hlLCBQSFA1IGFu\
ZCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJl\
ZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2Fs\
Z2FyL2JpdG5hbWktZHJ1cGFsLXJoZWwtYXBhY2hlLXBocDUnCiAgZG9jdW1lbnRhdGlvblVybDog\
aHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL2RydXBhbC8KICBpbWFnZVVy\
bDogaHR0cHM6Ly9kMzNucDluMzJqNTNnNy5jbG91ZGZyb250Lm5ldC9hc3NldHMvc3RhY2tzL2Ry\
dXBhbC9pbWcvZHJ1cGFsLXN0YWNrLTExMHgxMTctOWY5MzkxMWRhMmYyNjJlYzBhMmU1ZDQ5Y2Ri\
ZDU1NmYucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFuczoKICAtIG5hbWU6\
IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIERydXBh\
bCB3aXRoIHBocC1mcG0gNS42LjM1LCBBcGFjaGUgYW5kIE1hcmlhREIKICAgIGZyZWU6IFRydWUK\
ICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBkcnVwYWxfZW1h\
aWwKICAgICAgICBkZWZhdWx0OiB1c2VyQGV4YW1wbGUuY29tCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgdGl0bGU6IFVzZXIgZW1haWwKICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBlbWFp\
bAogICAgICAtIG5hbWU6IGRydXBhbF91c2VybmFtZQogICAgICAgIGRlZmF1bHQ6IHVzZXIKICAg\
ICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IERydXBhbCBhZG1pbiB1c2VybmFtZQog\
ICAgICAgIGRlc2NyaXB0aW9uOiBEcnVwYWwgYWRtaW4gdXNlcm5hbWUKICAgICAgICByZXF1aXJl\
ZDogdHJ1ZQogICAgICAtIG5hbWU6IGRydXBhbF9wYXNzd29yZAogICAgICAgIHBhdHRlcm46ICJe\
W2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICB0aXRsZTogRHJ1cGFsIGFkbWluIHBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRp\
b246IERydXBhbCBhZG1pbiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQK\
ICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IGRiX25hbWUKICAgICAgICBkZWZh\
dWx0OiBkYXRhYmFzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2Et\
ekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0aXRsZTogRGF0YWJh\
c2UgbmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBuYW1lCiAgICAgIC0gbmFtZTog\
ZGJfdXNlcgogICAgICAgIGRlZmF1bHQ6IGRidXNlcgogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAg\
ICAgICB0aXRsZTogRGF0YWJhc2UgdXNlcgogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSB1\
c2VyCiAgICAgIC0gbmFtZTogZGJfcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
ICB0aXRsZTogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2Ug\
cGFzc3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6\
IHRydWUKICAgICAgLSBuYW1lOiB2b2x1bWVfc2l6ZQogICAgICAgIHR5cGU6IGVudW0KICAgICAg\
ICBkZWZhdWx0OiAnMUdpJwogICAgICAgIGVudW06IFsnMUdpJywgJzVHaScsICcxMEdpJ10KICAg\
ICAgICB0aXRsZTogRGF0YWJhc2Ugdm9sdW1lIHNpemUKICAgICAgICByZXF1aXJlZDogdHJ1ZQo="




COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
