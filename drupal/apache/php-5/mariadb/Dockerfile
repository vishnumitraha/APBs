FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLWFwYWNoZS1waHA1LW1hcmlhZGIK\
ZGVzY3JpcHRpb246IEJpdG5hbWkgV29yZFByZXNzIHdpdGggQXBhY2hlLCBQSFA1IGFuZCBNYXJp\
YURCIEFuc2libGUgUGxheWJvb2sgQnVuZGxlCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEJpdG5hbWkgV29yZFByZXNzIHdpdGggQXBhY2hl\
LCBQSFA1IGFuZCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnku\
YWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIu\
aW8vamF2c2FsZ2FyL2JpdG5hbWktd29yZHByZXNzLXJoZWwtYXBhY2hlLXBocDUnCiAgZG9jdW1l\
bnRhdGlvblVybDogaHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL3dvcmRw\
cmVzcy8KICBpbWFnZVVybDogaHR0cHM6Ly9kN3VtcWljcGk3MjYzLmNsb3VkZnJvbnQubmV0L2lt\
Zy9wcm9kdWN0LzdkNDI2Y2I3LTk1MjItNGRkNy1hNTZiLTU1ZGQ4Y2MxYzhkMC9iNzNiOWYwNS0w\
YTk2LTRjYjEtOTEzNi05M2U1ZTc2MzY0ZmIucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0\
bmFtaQpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1\
bHQgcGxhbiBkZXBsb3lzIFdvcmRQcmVzcyB3aXRoIHBocC1mcG0gNy4yLCBBcGFjaGUgYW5kIE1h\
cmlhREIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAg\
ICAgLSBuYW1lOiBibG9nX25hbWUKICAgICAgICBkZWZhdWx0OiAiTXkgYmxvZyIKICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogQmxvZyBUaXRsZQogICAgICAgIGRlc2NyaXB0aW9u\
OiBUaXRsZSBvZiB5b3VyIGJsb2cKICAgICAgLSBuYW1lOiB3cF91c2VybmFtZQogICAgICAgIGRl\
ZmF1bHQ6IHVzZXIKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2Et\
ekEtWjAtOV9dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFdvcmRQcmVz\
cyBhZG1pbiB1c2VybmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiBXb3JkUHJlc3MgYWRtaW4gdXNl\
cm5hbWUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IHdwX3Bhc3N3b3JkCiAg\
ICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgog\
ICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBXb3JkUHJlc3MgYWRtaW4gcGFzc3dv\
cmQKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNzIGFkbWluIHBhc3N3b3JkCiAgICAgICAg\
ZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFt\
ZTogZGJfbmFtZQogICAgICAgIGRlZmF1bHQ6IGRhdGFiYXNlCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSok\
IgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBuYW1lCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFi\
YXNlIG5hbWUKICAgICAgLSBuYW1lOiBkYl91c2VyCiAgICAgICAgZGVmYXVsdDogZGJ1c2VyCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEt\
Wl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSB1c2VyCiAgICAgICAg\
ZGVzY3JpcHRpb246IERhdGFiYXNlIHVzZXIKICAgICAgLSBuYW1lOiBkYl9wYXNzd29yZAogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBwYXNzd29yZAogICAgICAg\
IGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfdHlwZTogcGFz\
c3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IHZvbHVtZV9zaXplCiAg\
ICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICcxR2knCiAgICAgICAgZW51bTogWycx\
R2knLCAnNUdpJywgJzEwR2knXQogICAgICAgIHRpdGxlOiBEYXRhYmFzZSB2b2x1bWUgc2l6ZQog\
ICAgICAgIHJlcXVpcmVkOiB0cnVlCg=="


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
