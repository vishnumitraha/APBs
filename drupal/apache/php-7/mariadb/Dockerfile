FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktZHJ1cGFsLWFwYWNoZS1waHA3LW1hcmlhZGIKZGVz\
Y3JpcHRpb246IEJpdG5hbWkgRHJ1cGFsIHdpdGggQXBhY2hlLCBQSFA3IGFuZCBNYXJpYURCIEFu\
c2libGUgUGxheWJvb2sgQnVuZGxlCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0\
YWRhdGE6CiAgZGlzcGxheU5hbWU6IEJpdG5hbWkgRHJ1cGFsIHdpdGggQXBhY2hlLCBQSFA3IGFu\
ZCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJl\
ZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2Fs\
Z2FyL2JpdG5hbWktZHJ1cGFsLXJoZWwtYXBhY2hlLXBocDcnCiAgZG9jdW1lbnRhdGlvblVybDog\
aHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL2RydXBhbC8KICBpbWFnZVVy\
bDogaHR0cHM6Ly9kMzNucDluMzJqNTNnNy5jbG91ZGZyb250Lm5ldC9hc3NldHMvc3RhY2tzL2Ry\
dXBhbC9pbWcvZHJ1cGFsLXN0YWNrLTExMHgxMTctOWY5MzkxMWRhMmYyNjJlYzBhMmU1ZDQ5Y2Ri\
ZDU1NmYucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFuczoKICAtIG5hbWU6\
IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIERydXBh\
bCB3aXRoIHBocC1mcG0gNy4yLCBBcGFjaGUgYW5kIE1hcmlhREIKICAgIGZyZWU6IFRydWUKICAg\
IG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBkcnVwYWxfZW1haWwK\
ICAgICAgICBkZWZhdWx0OiB1c2VyQGV4YW1wbGUuY29tCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgICAgdGl0bGU6IFVzZXIgZW1haWwKICAgICAgICBkZXNjcmlwdGlvbjogVXNlciBlbWFpbAog\
ICAgICAtIG5hbWU6IGRydXBhbF91c2VybmFtZQogICAgICAgIGRlZmF1bHQ6IHVzZXIKICAgICAg\
ICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IERydXBhbCBhZG1pbiB1c2VybmFtZQogICAg\
ICAgIGRlc2NyaXB0aW9uOiBEcnVwYWwgYWRtaW4gdXNlcm5hbWUKICAgICAgICByZXF1aXJlZDog\
dHJ1ZQogICAgICAtIG5hbWU6IGRydXBhbF9wYXNzd29yZAogICAgICAgIHBhdHRlcm46ICJeW2Et\
ekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICB0aXRsZTogRHJ1cGFsIGFkbWluIHBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246\
IERydXBhbCBhZG1pbiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IGRiX25hbWUKICAgICAgICBkZWZhdWx0\
OiBkYXRhYmFzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEt\
WjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0aXRsZTogRGF0YWJhc2Ug\
bmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBuYW1lCiAgICAgIC0gbmFtZTogZGJf\
dXNlcgogICAgICAgIGRlZmF1bHQ6IGRidXNlcgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAg\
ICB0aXRsZTogRGF0YWJhc2UgdXNlcgogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSB1c2Vy\
CiAgICAgIC0gbmFtZTogZGJfcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0\
aXRsZTogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgcGFz\
c3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRy\
dWUKICAgICAgLSBuYW1lOiB2b2x1bWVfc2l6ZQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBk\
ZWZhdWx0OiAnMUdpJwogICAgICAgIGVudW06IFsnMUdpJywgJzVHaScsICcxMEdpJ10KICAgICAg\
ICB0aXRsZTogRGF0YWJhc2Ugdm9sdW1lIHNpemUKICAgICAgICByZXF1aXJlZDogdHJ1ZQo="





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
