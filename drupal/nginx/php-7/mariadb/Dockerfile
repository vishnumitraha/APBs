FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktZHJ1cGFsLW5naW54LXBocDctbWFyaWFkYgpkZXNj\
cmlwdGlvbjogQml0bmFtaSBEcnVwYWwgd2l0aCBOZ2lueCwgUEhQNyBhbmQgTWFyaWFEQiBBbnNp\
YmxlIFBsYXlib29rIEJ1bmRsZQpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFk\
YXRhOgogIGRpc3BsYXlOYW1lOiBCaXRuYW1pIERydXBhbCB3aXRoIE5naW54LCBQSFA3IGFuZCBN\
YXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhh\
dC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2FsZ2Fy\
L2JpdG5hbWktZHJ1cGFsLXJoZWwnCiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly9kb2NzLmJp\
dG5hbWkuY29tL2luc3RhbGxlci9hcHBzL2RydXBhbC8KICBpbWFnZVVybDogaHR0cHM6Ly9kMzNu\
cDluMzJqNTNnNy5jbG91ZGZyb250Lm5ldC9hc3NldHMvc3RhY2tzL2RydXBhbC9pbWcvZHJ1cGFs\
LXN0YWNrLTExMHgxMTctOWY5MzkxMWRhMmYyNjJlYzBhMmU1ZDQ5Y2RiZDU1NmYucG5nCiAgcHJv\
dmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRl\
c2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIERydXBhbCB3aXRoIHBocC1mcG0g\
Ny4yLCBOZ2lueCBhbmQgTWFyaWFEQgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAg\
ICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IGRydXBhbF9lbWFpbAogICAgICAgIGRlZmF1bHQ6\
IHVzZXJAZXhhbXBsZS5jb20KICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogVXNl\
ciBlbWFpbAogICAgICAgIGRlc2NyaXB0aW9uOiBVc2VyIGVtYWlsCiAgICAgIC0gbmFtZTogZHJ1\
cGFsX3VzZXJuYW1lCiAgICAgICAgZGVmYXVsdDogdXNlcgogICAgICAgIHBhdHRlcm46ICJeW2Et\
ekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICB0aXRsZTogRHJ1cGFsIGFkbWluIHVzZXJuYW1lCiAgICAgICAgZGVzY3JpcHRpb246\
IERydXBhbCBhZG1pbiB1c2VybmFtZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFt\
ZTogZHJ1cGFsX3Bhc3N3b3JkCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEt\
Wl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBE\
cnVwYWwgYWRtaW4gcGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogRHJ1cGFsIGFkbWluIHBh\
c3N3b3JkCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0\
cnVlCiAgICAgIC0gbmFtZTogZGJfbmFtZQogICAgICAgIGRlZmF1bHQ6IGRhdGFiYXNlCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9d\
K1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBuYW1lCiAgICAgICAgZGVz\
Y3JpcHRpb246IERhdGFiYXNlIG5hbWUKICAgICAgLSBuYW1lOiBkYl91c2VyCiAgICAgICAgZGVm\
YXVsdDogZGJ1c2VyCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16\
QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFz\
ZSB1c2VyCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHVzZXIKICAgICAgLSBuYW1lOiBk\
Yl9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBw\
YXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBwYXNzd29yZAogICAgICAgIGRp\
c3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6\
IHZvbHVtZV9zaXplCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICcxR2knCiAg\
ICAgICAgZW51bTogWycxR2knLCAnNUdpJywgJzEwR2knXQogICAgICAgIHRpdGxlOiBEYXRhYmFz\
ZSB2b2x1bWUgc2l6ZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
COPY licenses /licenses
USER apb
