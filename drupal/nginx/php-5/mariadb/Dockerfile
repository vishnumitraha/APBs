FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktZHJ1cGFsLW5naW54LXBocDUtbWFyaWFkYgpkZXNj\
cmlwdGlvbjogQml0bmFtaSBEcnVwYWwgd2l0aCBOZ2lueCwgUEhQNSBhbmQgTWFyaWFEQiBBbnNp\
YmxlIFBsYXlib29rIEJ1bmRsZQpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFk\
YXRhOgogIGRpc3BsYXlOYW1lOiBCaXRuYW1pIERydXBhbCB3aXRoIE5naW54LCBQSFA1IGFuZCBN\
YXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhh\
dC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2FsZ2Fy\
L2JpdG5hbWktZHJ1cGFsLXJoZWwtbmdpbngtcGhwNScKICBkb2N1bWVudGF0aW9uVXJsOiBodHRw\
czovL2RvY3MuYml0bmFtaS5jb20vaW5zdGFsbGVyL2FwcHMvZHJ1cGFsLwogIGltYWdlVXJsOiBo\
dHRwczovL2QzM25wOW4zMmo1M2c3LmNsb3VkZnJvbnQubmV0L2Fzc2V0cy9zdGFja3MvZHJ1cGFs\
L2ltZy9kcnVwYWwtc3RhY2stMTEweDExNy05ZjkzOTExZGEyZjI2MmVjMGEyZTVkNDljZGJkNTU2\
Zi5wbmcKICBwcm92aWRlckRpc3BsYXlOYW1lOiBCaXRuYW1pCnBsYW5zOgogIC0gbmFtZTogZGVm\
YXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgZGVmYXVsdCBwbGFuIGRlcGxveXMgRHJ1cGFsIHdp\
dGggcGhwLWZwbSA1LjYuMzUsIE5naW54IGFuZCBNYXJpYURCCiAgICBmcmVlOiBUcnVlCiAgICBt\
ZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogZHJ1cGFsX2VtYWlsCiAg\
ICAgICAgZGVmYXVsdDogdXNlckBleGFtcGxlLmNvbQogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIHRpdGxlOiBVc2VyIGVtYWlsCiAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgZW1haWwKICAg\
ICAgLSBuYW1lOiBkcnVwYWxfdXNlcm5hbWUKICAgICAgICBkZWZhdWx0OiB1c2VyCiAgICAgICAg\
cGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBEcnVwYWwgYWRtaW4gdXNlcm5hbWUKICAgICAg\
ICBkZXNjcmlwdGlvbjogRHJ1cGFsIGFkbWluIHVzZXJuYW1lCiAgICAgICAgcmVxdWlyZWQ6IHRy\
dWUKICAgICAgLSBuYW1lOiBkcnVwYWxfcGFzc3dvcmQKICAgICAgICBwYXR0ZXJuOiAiXlthLXpB\
LVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgICAgdGl0bGU6IERydXBhbCBhZG1pbiBwYXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBE\
cnVwYWwgYWRtaW4gcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBkYl9uYW1lCiAgICAgICAgZGVmYXVsdDog\
ZGF0YWJhc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVow\
LTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIG5h\
bWUKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgbmFtZQogICAgICAtIG5hbWU6IGRiX3Vz\
ZXIKICAgICAgICBkZWZhdWx0OiBkYnVzZXIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBw\
YXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAg\
dGl0bGU6IERhdGFiYXNlIHVzZXIKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgdXNlcgog\
ICAgICAtIG5hbWU6IGRiX3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0\
bGU6IERhdGFiYXNlIHBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHBhc3N3\
b3JkCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgIC0gbmFtZTogdm9sdW1lX3NpemUKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVm\
YXVsdDogJzFHaScKICAgICAgICBlbnVtOiBbJzFHaScsICc1R2knLCAnMTBHaSddCiAgICAgICAg\
dGl0bGU6IERhdGFiYXNlIHZvbHVtZSBzaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK"





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
