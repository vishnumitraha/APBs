FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktbGVtcDctbWFyaWFkYgpkZXNjcmlwdGlvbjogQml0\
bmFtaSBMRU1QNyB3aXRoIE1hcmlhREIgQW5zaWJsZSBQbGF5Ym9vayBCdW5kbGUKYmluZGFibGU6\
IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogQml0bmFtaSBM\
RU1QNyB3aXRoIE1hcmlhREIgKEFQQikKICBkZXBlbmRlbmNpZXM6CiAgICAtICdkb2NrZXIuaW8v\
YWxlc3NmZy9vcGVuc2hpZnQtbmdpbngnCiAgICAtICdkb2NrZXIuaW8vamF2c2FsZ2FyL3BocC1m\
cG0tcmVkaGF0OjcuMicKICAgIC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5yZWRoYXQuY29tL3Joc2NsL21h\
cmlhZGItMTAxLXJoZWw3JwogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vZG9jcy5iaXRuYW1p\
LmNvbS9pbnN0YWxsZXIvaW5mcmFzdHJ1Y3R1cmUvbmdpbngvCiAgaW1hZ2VVcmw6IGh0dHBzOi8v\
ZDd1bXFpY3BpNzI2My5jbG91ZGZyb250Lm5ldC9pbWcvcHJvZHVjdC85Y2MyNDk1ZC1hYjA2LTQ4\
ZWEtOGNkZi1lMjAzZjhmYjZlZjAvZDdhZGVkOWYtNTViYy00MTYwLThiNzMtNzg1NGMyMTA5NDYx\
LnBuZwogIHByb3ZpZGVyRGlzcGxheU5hbWU6IEJpdG5hbWkKcGxhbnM6CiAgLSBuYW1lOiBkZWZh\
dWx0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBkZWZhdWx0IHBsYW4gZGVwbG95cyBwaHAtZnBtIDcu\
MiwgTmdpbnggYW5kIE1hcmlhREIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAg\
cGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBnaXRfcmVwbwogICAgICAgIGRlZmF1bHQ6IGh0dHBz\
Oi8vZ2l0aHViLmNvbS9jYXJyb2RoZXIvc2FtcGxlLVBIUC1hcHAKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICB0aXRsZTogR2l0IFJlcG9zaXRvcnkKICAgICAgICBkZXNjcmlwdGlvbjogR2l0\
IHJlcG9zaXRvcnkgY29udGFpbmluZyBQSFAgYXBwbGljYXRpb24KICAgICAgICByZXF1aXJlZDog\
dHJ1ZQogICAgICAtIG5hbWU6IGRiX25hbWUKICAgICAgICBkZWZhdWx0OiBkYXRhYmFzZQogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpf\
XStbYS16QS1aMC05X10qJCIKICAgICAgICB0aXRsZTogRGF0YWJhc2UgbmFtZQogICAgICAgIGRl\
c2NyaXB0aW9uOiBEYXRhYmFzZSBuYW1lCiAgICAgIC0gbmFtZTogZGJfdXNlcgogICAgICAgIGRl\
ZmF1bHQ6IGRidXNlcgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2Et\
ekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0aXRsZTogRGF0YWJh\
c2UgdXNlcgogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSB1c2VyCiAgICAgIC0gbmFtZTog\
ZGJfcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogRGF0YWJhc2Ug\
cGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAgICBk\
aXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1l\
OiB2b2x1bWVfc2l6ZQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBkZWZhdWx0OiAnMUdpJwog\
ICAgICAgIGVudW06IFsnMUdpJywgJzVHaScsICcxMEdpJ10KICAgICAgICB0aXRsZTogRGF0YWJh\
c2Ugdm9sdW1lIHNpemUKICAgICAgICByZXF1aXJlZDogdHJ1ZQo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
