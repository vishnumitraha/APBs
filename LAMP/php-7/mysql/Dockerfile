FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"CnZlcnNpb246IDEuMApuYW1lOiBiaXRuYW1pLWxhbXA3LW15c3FsCmRlc2NyaXB0aW9uOiBCaXRu\
YW1pIExBTVA3IHdpdGggTXlTUUwgQW5zaWJsZSBQbGF5Ym9vayBCdW5kbGUKYmluZGFibGU6IEZh\
bHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogQml0bmFtaSBMQU1Q\
NyB3aXRoIE15U1FMIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNz\
LnJlZGhhdC5jb20vcmhzY2wvaHR0cGQtMjQtcmhlbDcnCiAgICAtICdyZWdpc3RyeS5hY2Nlc3Mu\
cmVkaGF0LmNvbS9yaHNjbC9teXNxbC01Ny1yaGVsNycKICAgIC0gJ2RvY2tlci5pby9qYXZzYWxn\
YXIvcGhwLWZwbS1yZWRoYXQ6Ny4yJwogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vZG9jcy5i\
aXRuYW1pLmNvbS9pbnN0YWxsZXIvaW5mcmFzdHJ1Y3R1cmUvbGFtcC8KICBpbWFnZVVybDogaHR0\
cHM6Ly9kN3VtcWljcGk3MjYzLmNsb3VkZnJvbnQubmV0L2ltZy9wcm9kdWN0Lzk2M2UwOGEwLTFl\
NWYtNDBiMy05YTFkLTcyYWUzMjJkYTJhYy9jNjUyMDY5Ny0yODUyLTQwOTQtYTlhMS04MjkzOWMz\
NTM3MDQucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFuczoKICAtIG5hbWU6\
IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIHBocC1m\
cG0gNy4yLCBBcGFjaGUgYW5kIE15U1FMCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30K\
ICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogZ2l0X3JlcG8KICAgICAgICBkZWZhdWx0OiBo\
dHRwczovL2dpdGh1Yi5jb20vY2Fycm9kaGVyL3NhbXBsZS1QSFAtYXBwCiAgICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgICAgdGl0bGU6IEdpdCBSZXBvc2l0b3J5CiAgICAgICAgZGVzY3JpcHRpb246\
IEdpdCByZXBvc2l0b3J5IGNvbnRhaW5pbmcgUEhQIGFwcGxpY2F0aW9uCiAgICAgICAgcmVxdWly\
ZWQ6IHRydWUKICAgICAgLSBuYW1lOiBkYl9uYW1lCiAgICAgICAgZGVmYXVsdDogZGF0YWJhc2UK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16\
QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIG5hbWUKICAgICAg\
ICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgbmFtZQogICAgICAtIG5hbWU6IGRiX3VzZXIKICAgICAg\
ICBkZWZhdWx0OiBkYnVzZXIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAi\
XlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERh\
dGFiYXNlIHVzZXIKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgdXNlcgogICAgICAtIG5h\
bWU6IGRiX3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IERhdGFi\
YXNlIHBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHBhc3N3b3JkCiAgICAg\
ICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0g\
bmFtZTogdm9sdW1lX3NpemUKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogJzFH\
aScKICAgICAgICBlbnVtOiBbJzFHaScsICc1R2knLCAnMTBHaSddCiAgICAgICAgdGl0bGU6IERh\
dGFiYXNlIHZvbHVtZSBzaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK"



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
