- name: delete php-fpm-apache deployment config
  openshift_v1_deployment_config:
    name: php-fpm-apache
    namespace: '{{ namespace }}'
    state: absent

- name: delete database deployment config
  openshift_v1_deployment_config:
    name: mysql
    namespace: '{{ namespace }}'
    state: absent

- name: delete Apache route
  openshift_v1_route:
    name: apache-route
    namespace: '{{ namespace }}'
    state: absent

- name: delete Apache service
  k8s_v1_service:
    name: apache-service
    namespace: '{{ namespace }}'
    state: absent

- name: delete database service
  k8s_v1_service:
    name: database-service
    namespace: '{{ namespace }}'
    state: absent

- name: delete database volume claim
  k8s_v1_persistent_volume_claim:
    name: database-volume-claim
    namespace: '{{ namespace }}'
    state: absent

- name: delete database credentials as secret
  k8s_v1_secret:
    name: database-secret
    namespace: '{{ namespace }}'
    state: absent

- name: delete Apache config map
  shell: oc delete configmap apache-conf
