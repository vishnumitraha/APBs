FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"CnZlcnNpb246IDEuMApuYW1lOiBiaXRuYW1pLWxhbXA3LW1hcmlhZGIKZGVzY3JpcHRpb246IEJp\
dG5hbWkgTEFNUDcgd2l0aCBNYXJpYURCIEFuc2libGUgUGxheWJvb2sgQnVuZGxlCmJpbmRhYmxl\
OiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEJpdG5hbWkg\
TEFNUDcgd2l0aCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnku\
YWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvaHR0cGQtMjQtcmhlbDcnCiAgICAtICdyZWdpc3RyeS5h\
Y2Nlc3MucmVkaGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEwMS1yaGVsNycKICAgIC0gJ2RvY2tlci5p\
by9jYXJyb2RoZXIvcGhwLWZwbS1ub24tcm9vdC03LjInCiAgZG9jdW1lbnRhdGlvblVybDogaHR0\
cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9pbmZyYXN0cnVjdHVyZS9sYW1wLwogIGlt\
YWdlVXJsOiBodHRwczovL2Q3dW1xaWNwaTcyNjMuY2xvdWRmcm9udC5uZXQvaW1nL3Byb2R1Y3Qv\
OTYzZTA4YTAtMWU1Zi00MGIzLTlhMWQtNzJhZTMyMmRhMmFjL2M2NTIwNjk3LTI4NTItNDA5NC1h\
OWExLTgyOTM5YzM1MzcwNC5wbmcKICBwcm92aWRlckRpc3BsYXlOYW1lOiBCaXRuYW1pCnBsYW5z\
OgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgZGVmYXVsdCBwbGFuIGRl\
cGxveXMgcGhwLWZwbSA3LjIsIEFwYWNoZSBhbmQgTWFyaWFEQgogICAgZnJlZTogVHJ1ZQogICAg\
bWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IGdpdF9yZXBvCiAgICAg\
ICAgZGVmYXVsdDogaHR0cHM6Ly9naXRodWIuY29tL2NhcnJvZGhlci9zYW1wbGUtUEhQLWFwcAog\
ICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBHaXQgUmVwb3NpdG9yeQogICAgICAg\
IGRlc2NyaXB0aW9uOiBHaXQgcmVwb3NpdG9yeSBjb250YWluaW5nIFBIUCBhcHBsaWNhdGlvbgog\
ICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTogZGJfbmFtZQogICAgICAgIGRlZmF1\
bHQ6IGRhdGFiYXNlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16\
QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFz\
ZSBuYW1lCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIG5hbWUKICAgICAgLSBuYW1lOiBk\
Yl91c2VyCiAgICAgICAgZGVmYXVsdDogZGJ1c2VyCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
ICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAg\
ICAgIHRpdGxlOiBEYXRhYmFzZSB1c2VyCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHVz\
ZXIKICAgICAgLSBuYW1lOiBkYl9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IHRpdGxlOiBEYXRhYmFzZSBwYXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBw\
YXNzd29yZAogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDog\
dHJ1ZQogICAgICAtIG5hbWU6IHZvbHVtZV9zaXplCiAgICAgICAgdHlwZTogZW51bQogICAgICAg\
IGRlZmF1bHQ6ICcxR2knCiAgICAgICAgZW51bTogWycxR2knLCAnNUdpJywgJzEwR2knXQogICAg\
ICAgIHRpdGxlOiBEYXRhYmFzZSB2b2x1bWUgc2l6ZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCg=="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
