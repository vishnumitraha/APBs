FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktbGFtcDUtbXlzcWwKZGVzY3JpcHRpb246IEJpdG5h\
bWkgTEFNUDUgd2l0aCBNeVNRTCBBbnNpYmxlIFBsYXlib29rIEJ1bmRsZQpiaW5kYWJsZTogRmFs\
c2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBCaXRuYW1pIExBTVA1\
IHdpdGggTXlTUUwgKEFQQikKICBkZXBlbmRlbmNpZXM6CiAgICAtICdyZWdpc3RyeS5hY2Nlc3Mu\
cmVkaGF0LmNvbS9yaHNjbC9odHRwZC0yNC1yaGVsNycKICAgIC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5y\
ZWRoYXQuY29tL3Joc2NsL215c3FsLTU3LXJoZWw3JwogICAgLSAnZG9ja2VyLmlvL2phdnNhbGdh\
ci9waHAtZnBtLXJlZGhhdDo1LjYnCiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly9kb2NzLmJp\
dG5hbWkuY29tL2luc3RhbGxlci9pbmZyYXN0cnVjdHVyZS9sYW1wLwogIGltYWdlVXJsOiBodHRw\
czovL2Q3dW1xaWNwaTcyNjMuY2xvdWRmcm9udC5uZXQvaW1nL3Byb2R1Y3QvOTYzZTA4YTAtMWU1\
Zi00MGIzLTlhMWQtNzJhZTMyMmRhMmFjL2M2NTIwNjk3LTI4NTItNDA5NC1hOWExLTgyOTM5YzM1\
MzcwNC5wbmcKICBwcm92aWRlckRpc3BsYXlOYW1lOiBCaXRuYW1pCnBsYW5zOgogIC0gbmFtZTog\
ZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgZGVmYXVsdCBwbGFuIGRlcGxveXMgcGhwLWZw\
bSA1LjYsIEFwYWNoZSBhbmQgTXlTUUwKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQog\
ICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBnaXRfcmVwbwogICAgICAgIGRlZmF1bHQ6IGh0\
dHBzOi8vZ2l0aHViLmNvbS9jYXJyb2RoZXIvc2FtcGxlLVBIUC1hcHAKICAgICAgICB0eXBlOiBz\
dHJpbmcKICAgICAgICB0aXRsZTogR2l0IFJlcG9zaXRvcnkKICAgICAgICBkZXNjcmlwdGlvbjog\
R2l0IHJlcG9zaXRvcnkgY29udGFpbmluZyBQSFAgYXBwbGljYXRpb24KICAgICAgICByZXF1aXJl\
ZDogdHJ1ZQogICAgICAtIG5hbWU6IGRiX25hbWUKICAgICAgICBkZWZhdWx0OiBkYXRhYmFzZQog\
ICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpB\
LVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0aXRsZTogRGF0YWJhc2UgbmFtZQogICAgICAg\
IGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBuYW1lCiAgICAgIC0gbmFtZTogZGJfdXNlcgogICAgICAg\
IGRlZmF1bHQ6IGRidXNlcgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJe\
W2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICB0aXRsZTogRGF0\
YWJhc2UgdXNlcgogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSB1c2VyCiAgICAgIC0gbmFt\
ZTogZGJfcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogRGF0YWJh\
c2UgcGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAg\
ICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBu\
YW1lOiB2b2x1bWVfc2l6ZQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBkZWZhdWx0OiAnMUdp\
JwogICAgICAgIGVudW06IFsnMUdpJywgJzVHaScsICcxMEdpJ10KICAgICAgICB0aXRsZTogRGF0\
YWJhc2Ugdm9sdW1lIHNpemUKICAgICAgICByZXF1aXJlZDogdHJ1ZQo="



COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
