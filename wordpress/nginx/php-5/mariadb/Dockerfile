FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLW5naW54LXBocDUtbWFyaWFkYgpk\
ZXNjcmlwdGlvbjogQml0bmFtaSBXb3JkUHJlc3Mgd2l0aCBOZ2lueCwgUEhQNSBhbmQgTWFyaWFE\
QiBBbnNpYmxlIFBsYXlib29rIEJ1bmRsZQpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFs\
Cm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBCaXRuYW1pIFdvcmRQcmVzcyB3aXRoIE5naW54LCBQ\
SFA1IGFuZCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNj\
ZXNzLnJlZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIuaW8v\
amF2c2FsZ2FyL2JpdG5hbWktd29yZHByZXNzLXJoZWwtbmdpbngtcGhwNScKICBkb2N1bWVudGF0\
aW9uVXJsOiBodHRwczovL2RvY3MuYml0bmFtaS5jb20vaW5zdGFsbGVyL2FwcHMvd29yZHByZXNz\
LwogIGltYWdlVXJsOiBodHRwczovL2Q3dW1xaWNwaTcyNjMuY2xvdWRmcm9udC5uZXQvaW1nL3By\
b2R1Y3QvN2Q0MjZjYjctOTUyMi00ZGQ3LWE1NmItNTVkZDhjYzFjOGQwL2I3M2I5ZjA1LTBhOTYt\
NGNiMS05MTM2LTkzZTVlNzYzNjRmYi5wbmcKICBwcm92aWRlckRpc3BsYXlOYW1lOiBCaXRuYW1p\
CnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgZGVmYXVsdCBw\
bGFuIGRlcGxveXMgV29yZFByZXNzIHdpdGggcGhwLWZwbSA1LjYuMzUsIE5naW54IGFuZCBNYXJp\
YURCCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAg\
IC0gbmFtZTogYmxvZ19uYW1lCiAgICAgICAgZGVmYXVsdDogIk15IGJsb2ciCiAgICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEJsb2cgVGl0bGUKICAgICAgICBkZXNjcmlwdGlvbjog\
VGl0bGUgb2YgeW91ciBibG9nCiAgICAgIC0gbmFtZTogd29yZHByZXNzX3VzZXJuYW1lCiAgICAg\
ICAgZGVmYXVsdDogdXNlcgogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpf\
XStbYS16QS1aMC05X10qJCIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogV29y\
ZFByZXNzIGFkbWluIHVzZXJuYW1lCiAgICAgICAgZGVzY3JpcHRpb246IFdvcmRQcmVzcyBhZG1p\
biB1c2VybmFtZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTogd29yZHByZXNz\
X3Bhc3N3b3JkCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpB\
LVowLTlfXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBXb3JkUHJlc3Mg\
YWRtaW4gcGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNzIGFkbWluIHBhc3N3\
b3JkCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgIC0gbmFtZTogZGJfbmFtZQogICAgICAgIGRlZmF1bHQ6IGRhdGFiYXNlCiAgICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1th\
LXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBuYW1lCiAgICAgICAgZGVzY3Jp\
cHRpb246IERhdGFiYXNlIG5hbWUKICAgICAgLSBuYW1lOiBkYl91c2VyCiAgICAgICAgZGVmYXVs\
dDogZGJ1c2VyCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1a\
MC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSB1\
c2VyCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHVzZXIKICAgICAgLSBuYW1lOiBkYl9w\
YXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBwYXNz\
d29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBwYXNzd29yZAogICAgICAgIGRpc3Bs\
YXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IHZv\
bHVtZV9zaXplCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICcxR2knCiAgICAg\
ICAgZW51bTogWycxR2knLCAnNUdpJywgJzEwR2knXQogICAgICAgIHRpdGxlOiBEYXRhYmFzZSB2\
b2x1bWUgc2l6ZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCg=="





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
