FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLW5naW54LXBocDctbXlzcWwKZGVz\
Y3JpcHRpb246IEJpdG5hbWkgV29yZFByZXNzIHdpdGggTmdpbngsIFBIUDcgYW5kIE15U1FMIEFu\
c2libGUgUGxheWJvb2sgQnVuZGxlCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0\
YWRhdGE6CiAgZGlzcGxheU5hbWU6IEJpdG5hbWkgV29yZFByZXNzIHdpdGggTmdpbngsIFBIUDcg\
YW5kIE1hcmlhREIgKEFQQikKICBkZXBlbmRlbmNpZXM6CiAgICAtICdyZWdpc3RyeS5hY2Nlc3Mu\
cmVkaGF0LmNvbS9yaHNjbC9teXNxbC01Ny1yaGVsNycKICAgIC0gJ2RvY2tlci5pby9qYXZzYWxn\
YXIvYml0bmFtaS13b3JkcHJlc3MtcmhlbC1uZ2lueC1waHA3JwogIGRvY3VtZW50YXRpb25Vcmw6\
IGh0dHBzOi8vZG9jcy5iaXRuYW1pLmNvbS9pbnN0YWxsZXIvYXBwcy93b3JkcHJlc3MvCiAgaW1h\
Z2VVcmw6IGh0dHBzOi8vZDd1bXFpY3BpNzI2My5jbG91ZGZyb250Lm5ldC9pbWcvcHJvZHVjdC83\
ZDQyNmNiNy05NTIyLTRkZDctYTU2Yi01NWRkOGNjMWM4ZDAvYjczYjlmMDUtMGE5Ni00Y2IxLTkx\
MzYtOTNlNWU3NjM2NGZiLnBuZwogIHByb3ZpZGVyRGlzcGxheU5hbWU6IEJpdG5hbWkKcGxhbnM6\
CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBkZWZhdWx0IHBsYW4gZGVw\
bG95cyBXb3JkUHJlc3Mgd2l0aCBwaHAtZnBtIDcuMiwgTmdpbnggYW5kIE1hcmlhREIKICAgIGZy\
ZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBi\
bG9nX25hbWUKICAgICAgICBkZWZhdWx0OiAiTXkgYmxvZyIKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICB0aXRsZTogQmxvZyBUaXRsZQogICAgICAgIGRlc2NyaXB0aW9uOiBUaXRsZSBvZiB5\
b3VyIGJsb2cKICAgICAgLSBuYW1lOiB3b3JkcHJlc3NfdXNlcm5hbWUKICAgICAgICBkZWZhdWx0\
OiB1c2VyCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVow\
LTlfXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBXb3JkUHJlc3MgYWRt\
aW4gdXNlcm5hbWUKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNzIGFkbWluIHVzZXJuYW1l\
CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiB3b3JkcHJlc3NfcGFzc3dvcmQK\
ICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQi\
CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFdvcmRQcmVzcyBhZG1pbiBwYXNz\
d29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBXb3JkUHJlc3MgYWRtaW4gcGFzc3dvcmQKICAgICAg\
ICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBu\
YW1lOiBkYl9uYW1lCiAgICAgICAgZGVmYXVsdDogZGF0YWJhc2UKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9d\
KiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIG5hbWUKICAgICAgICBkZXNjcmlwdGlvbjogRGF0\
YWJhc2UgbmFtZQogICAgICAtIG5hbWU6IGRiX3VzZXIKICAgICAgICBkZWZhdWx0OiBkYnVzZXIK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16\
QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIHVzZXIKICAgICAg\
ICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgdXNlcgogICAgICAtIG5hbWU6IGRiX3Bhc3N3b3JkCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIHBhc3N3b3JkCiAgICAg\
ICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHBhc3N3b3JkCiAgICAgICAgZGlzcGxheV90eXBlOiBw\
YXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTogdm9sdW1lX3NpemUK\
ICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogJzFHaScKICAgICAgICBlbnVtOiBb\
JzFHaScsICc1R2knLCAnMTBHaSddCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIHZvbHVtZSBzaXpl\
CiAgICAgICAgcmVxdWlyZWQ6IHRydWUK"





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
