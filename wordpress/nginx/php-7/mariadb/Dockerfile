FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLW5naW54LXBocDctbWFyaWFkYgpk\
ZXNjcmlwdGlvbjogQml0bmFtaSBXb3JkUHJlc3Mgd2l0aCBOZ2lueCwgUEhQNyBhbmQgTWFyaWFE\
QiBBbnNpYmxlIFBsYXlib29rIEJ1bmRsZQpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFs\
Cm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBCaXRuYW1pIFdvcmRQcmVzcyB3aXRoIE5naW54LCBQ\
SFA3IGFuZCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNj\
ZXNzLnJlZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIuaW8v\
amF2c2FsZ2FyL2JpdG5hbWktd29yZHByZXNzLXJoZWwnCiAgZG9jdW1lbnRhdGlvblVybDogaHR0\
cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL3dvcmRwcmVzcy8KICBpbWFnZVVy\
bDogaHR0cHM6Ly9kN3VtcWljcGk3MjYzLmNsb3VkZnJvbnQubmV0L2ltZy9wcm9kdWN0LzdkNDI2\
Y2I3LTk1MjItNGRkNy1hNTZiLTU1ZGQ4Y2MxYzhkMC9iNzNiOWYwNS0wYTk2LTRjYjEtOTEzNi05\
M2U1ZTc2MzY0ZmIucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFuczoKICAt\
IG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lz\
IFdvcmRQcmVzcyB3aXRoIHBocC1mcG0gNy4yLCBOZ2lueCBhbmQgTWFyaWFEQgogICAgZnJlZTog\
VHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IGJsb2df\
bmFtZQogICAgICAgIGRlZmF1bHQ6ICJNeSBibG9nIgogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIHRpdGxlOiBCbG9nIFRpdGxlCiAgICAgICAgZGVzY3JpcHRpb246IFRpdGxlIG9mIHlvdXIg\
YmxvZwogICAgICAtIG5hbWU6IHdvcmRwcmVzc191c2VybmFtZQogICAgICAgIGRlZmF1bHQ6IHVz\
ZXIKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9d\
KiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFdvcmRQcmVzcyBhZG1pbiB1\
c2VybmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiBXb3JkUHJlc3MgYWRtaW4gdXNlcm5hbWUKICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IHdvcmRwcmVzc19wYXNzd29yZAogICAg\
ICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAg\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogV29yZFByZXNzIGFkbWluIHBhc3N3b3Jk\
CiAgICAgICAgZGVzY3JpcHRpb246IFdvcmRQcmVzcyBhZG1pbiBwYXNzd29yZAogICAgICAgIGRp\
c3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6\
IGRiX25hbWUKICAgICAgICBkZWZhdWx0OiBkYXRhYmFzZQogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIK\
ICAgICAgICB0aXRsZTogRGF0YWJhc2UgbmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFz\
ZSBuYW1lCiAgICAgIC0gbmFtZTogZGJfdXNlcgogICAgICAgIGRlZmF1bHQ6IGRidXNlcgogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpf\
XStbYS16QS1aMC05X10qJCIKICAgICAgICB0aXRsZTogRGF0YWJhc2UgdXNlcgogICAgICAgIGRl\
c2NyaXB0aW9uOiBEYXRhYmFzZSB1c2VyCiAgICAgIC0gbmFtZTogZGJfcGFzc3dvcmQKICAgICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAgICBk\
ZXNjcmlwdGlvbjogRGF0YWJhc2UgcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3\
b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiB2b2x1bWVfc2l6ZQogICAg\
ICAgIHR5cGU6IGVudW0KICAgICAgICBkZWZhdWx0OiAnMUdpJwogICAgICAgIGVudW06IFsnMUdp\
JywgJzVHaScsICcxMEdpJ10KICAgICAgICB0aXRsZTogRGF0YWJhc2Ugdm9sdW1lIHNpemUKICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQo="





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
