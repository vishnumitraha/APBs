FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLWFwYWNoZS1waHA1LW15c3FsCmRl\
c2NyaXB0aW9uOiBCaXRuYW1pIFdvcmRQcmVzcyB3aXRoIEFwYWNoZSwgUEhQNSBhbmQgTXlTUUwg\
QW5zaWJsZSBQbGF5Ym9vayBCdW5kbGUKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbApt\
ZXRhZGF0YToKICBkaXNwbGF5TmFtZTogQml0bmFtaSBXb3JkUHJlc3Mgd2l0aCBBcGFjaGUsIFBI\
UDUgYW5kIE15U1FMIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNz\
LnJlZGhhdC5jb20vcmhzY2wvbXlzcWwtNTctcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2Fs\
Z2FyL2JpdG5hbWktd29yZHByZXNzLXJoZWwtYXBhY2hlLXBocDUnCiAgZG9jdW1lbnRhdGlvblVy\
bDogaHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL3dvcmRwcmVzcy8KICBp\
bWFnZVVybDogaHR0cHM6Ly9kN3VtcWljcGk3MjYzLmNsb3VkZnJvbnQubmV0L2ltZy9wcm9kdWN0\
LzdkNDI2Y2I3LTk1MjItNGRkNy1hNTZiLTU1ZGQ4Y2MxYzhkMC9iNzNiOWYwNS0wYTk2LTRjYjEt\
OTEzNi05M2U1ZTc2MzY0ZmIucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0bmFtaQpwbGFu\
czoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBk\
ZXBsb3lzIFdvcmRQcmVzcyB3aXRoIHBocC1mcG0gNS42LjM1LCBBcGFjaGUgYW5kIG15c3FsCiAg\
ICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFt\
ZTogYmxvZ19uYW1lCiAgICAgICAgZGVmYXVsdDogIk15IGJsb2ciCiAgICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgICAgdGl0bGU6IEJsb2cgVGl0bGUKICAgICAgICBkZXNjcmlwdGlvbjogVGl0bGUg\
b2YgeW91ciBibG9nCiAgICAgIC0gbmFtZTogd29yZHByZXNzX3VzZXJuYW1lCiAgICAgICAgZGVm\
YXVsdDogdXNlcgogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16\
QS1aMC05X10qJCIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogV29yZFByZXNz\
IGFkbWluIHVzZXJuYW1lCiAgICAgICAgZGVzY3JpcHRpb246IFdvcmRQcmVzcyBhZG1pbiB1c2Vy\
bmFtZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTogd29yZHByZXNzX3Bhc3N3\
b3JkCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlf\
XSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBXb3JkUHJlc3MgYWRtaW4g\
cGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNzIGFkbWluIHBhc3N3b3JkCiAg\
ICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAg\
IC0gbmFtZTogZGJfbmFtZQogICAgICAgIGRlZmF1bHQ6IGRhdGFiYXNlCiAgICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVow\
LTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBuYW1lCiAgICAgICAgZGVzY3JpcHRpb246\
IERhdGFiYXNlIG5hbWUKICAgICAgLSBuYW1lOiBkYl91c2VyCiAgICAgICAgZGVmYXVsdDogZGJ1\
c2VyCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10q\
W2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSB1c2VyCiAg\
ICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHVzZXIKICAgICAgLSBuYW1lOiBkYl9wYXNzd29y\
ZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBwYXNzd29yZAog\
ICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfdHlw\
ZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IHZvbHVtZV9z\
aXplCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICcxR2knCiAgICAgICAgZW51\
bTogWycxR2knLCAnNUdpJywgJzEwR2knXQogICAgICAgIHRpdGxlOiBEYXRhYmFzZSB2b2x1bWUg\
c2l6ZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCg=="





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
