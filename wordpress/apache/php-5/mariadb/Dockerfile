FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLWFwYWNoZS1waHA1LW1hcmlhZGIK\
ZGVzY3JpcHRpb246IEJpdG5hbWkgV29yZFByZXNzIHdpdGggQXBhY2hlLCBQSFA1IGFuZCBNYXJp\
YURCIEFuc2libGUgUGxheWJvb2sgQnVuZGxlCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEJpdG5hbWkgV29yZFByZXNzIHdpdGggQXBhY2hl\
LCBQSFA1IGFuZCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnku\
YWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIu\
aW8vamF2c2FsZ2FyL2JpdG5hbWktd29yZHByZXNzLXJoZWwtYXBhY2hlLXBocDUnCiAgZG9jdW1l\
bnRhdGlvblVybDogaHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL3dvcmRw\
cmVzcy8KICBpbWFnZVVybDogaHR0cHM6Ly9kN3VtcWljcGk3MjYzLmNsb3VkZnJvbnQubmV0L2lt\
Zy9wcm9kdWN0LzdkNDI2Y2I3LTk1MjItNGRkNy1hNTZiLTU1ZGQ4Y2MxYzhkMC9iNzNiOWYwNS0w\
YTk2LTRjYjEtOTEzNi05M2U1ZTc2MzY0ZmIucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0\
bmFtaQpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1\
bHQgcGxhbiBkZXBsb3lzIFdvcmRQcmVzcyB3aXRoIHBocC1mcG0gNS42LjM1LCBBcGFjaGUgYW5k\
IE1hcmlhREIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoK\
ICAgICAgLSBuYW1lOiBibG9nX25hbWUKICAgICAgICBkZWZhdWx0OiAiTXkgYmxvZyIKICAgICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogQmxvZyBUaXRsZQogICAgICAgIGRlc2NyaXB0\
aW9uOiBUaXRsZSBvZiB5b3VyIGJsb2cKICAgICAgLSBuYW1lOiB3b3JkcHJlc3NfdXNlcm5hbWUK\
ICAgICAgICBkZWZhdWx0OiB1c2VyCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2Et\
ekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxl\
OiBXb3JkUHJlc3MgYWRtaW4gdXNlcm5hbWUKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNz\
IGFkbWluIHVzZXJuYW1lCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiB3b3Jk\
cHJlc3NfcGFzc3dvcmQKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10r\
W2EtekEtWjAtOV9dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFdvcmRQ\
cmVzcyBhZG1pbiBwYXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBXb3JkUHJlc3MgYWRtaW4g\
cGFzc3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6\
IHRydWUKICAgICAgLSBuYW1lOiBkYl9uYW1lCiAgICAgICAgZGVmYXVsdDogZGF0YWJhc2UKICAg\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1a\
X10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIG5hbWUKICAgICAgICBk\
ZXNjcmlwdGlvbjogRGF0YWJhc2UgbmFtZQogICAgICAtIG5hbWU6IGRiX3VzZXIKICAgICAgICBk\
ZWZhdWx0OiBkYnVzZXIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlth\
LXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFi\
YXNlIHVzZXIKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgdXNlcgogICAgICAtIG5hbWU6\
IGRiX3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IERhdGFiYXNl\
IHBhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHBhc3N3b3JkCiAgICAgICAg\
ZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFt\
ZTogdm9sdW1lX3NpemUKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogJzFHaScK\
ICAgICAgICBlbnVtOiBbJzFHaScsICc1R2knLCAnMTBHaSddCiAgICAgICAgdGl0bGU6IERhdGFi\
YXNlIHZvbHVtZSBzaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK"


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
