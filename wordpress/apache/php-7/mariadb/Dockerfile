FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLWFwYWNoZS1waHA3LW1hcmlhZGIK\
ZGVzY3JpcHRpb246IEJpdG5hbWkgV29yZFByZXNzIHdpdGggQXBhY2hlLCBQSFA3IGFuZCBNYXJp\
YURCIEFuc2libGUgUGxheWJvb2sgQnVuZGxlCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEJpdG5hbWkgV29yZFByZXNzIHdpdGggQXBhY2hl\
LCBQSFA3IGFuZCBNYXJpYURCIChBUEIpCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnku\
YWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvbWFyaWFkYi0xMDEtcmhlbDcnCiAgICAtICdkb2NrZXIu\
aW8vamF2c2FsZ2FyL2JpdG5hbWktd29yZHByZXNzLXJoZWwtYXBhY2hlLXBocDcnCiAgZG9jdW1l\
bnRhdGlvblVybDogaHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3RhbGxlci9hcHBzL3dvcmRw\
cmVzcy8KICBpbWFnZVVybDogaHR0cHM6Ly9kN3VtcWljcGk3MjYzLmNsb3VkZnJvbnQubmV0L2lt\
Zy9wcm9kdWN0LzdkNDI2Y2I3LTk1MjItNGRkNy1hNTZiLTU1ZGQ4Y2MxYzhkMC9iNzNiOWYwNS0w\
YTk2LTRjYjEtOTEzNi05M2U1ZTc2MzY0ZmIucG5nCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogQml0\
bmFtaQpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1\
bHQgcGxhbiBkZXBsb3lzIFdvcmRQcmVzcyB3aXRoIHBocC1mcG0gNy4yLCBBcGFjaGUgYW5kIE1h\
cmlhREIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAg\
ICAgLSBuYW1lOiBibG9nX25hbWUKICAgICAgICBkZWZhdWx0OiAiTXkgYmxvZyIKICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogQmxvZyBUaXRsZQogICAgICAgIGRlc2NyaXB0aW9u\
OiBUaXRsZSBvZiB5b3VyIGJsb2cKICAgICAgLSBuYW1lOiB3b3JkcHJlc3NfdXNlcm5hbWUKICAg\
ICAgICBkZWZhdWx0OiB1c2VyCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEt\
Wl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBX\
b3JkUHJlc3MgYWRtaW4gdXNlcm5hbWUKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNzIGFk\
bWluIHVzZXJuYW1lCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiB3b3JkcHJl\
c3NfcGFzc3dvcmQKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2Et\
ekEtWjAtOV9dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFdvcmRQcmVz\
cyBhZG1pbiBwYXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBXb3JkUHJlc3MgYWRtaW4gcGFz\
c3dvcmQKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRy\
dWUKICAgICAgLSBuYW1lOiBkYl9uYW1lCiAgICAgICAgZGVmYXVsdDogZGF0YWJhc2UKICAgICAg\
ICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10r\
W2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIG5hbWUKICAgICAgICBkZXNj\
cmlwdGlvbjogRGF0YWJhc2UgbmFtZQogICAgICAtIG5hbWU6IGRiX3VzZXIKICAgICAgICBkZWZh\
dWx0OiBkYnVzZXIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpB\
LVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdGl0bGU6IERhdGFiYXNl\
IHVzZXIKICAgICAgICBkZXNjcmlwdGlvbjogRGF0YWJhc2UgdXNlcgogICAgICAtIG5hbWU6IGRi\
X3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IERhdGFiYXNlIHBh\
c3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHBhc3N3b3JkCiAgICAgICAgZGlz\
cGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTog\
dm9sdW1lX3NpemUKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogJzFHaScKICAg\
ICAgICBlbnVtOiBbJzFHaScsICc1R2knLCAnMTBHaSddCiAgICAgICAgdGl0bGU6IERhdGFiYXNl\
IHZvbHVtZSBzaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK"





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
