FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJpdG5hbWktd29yZHByZXNzLXBocDctbXlzcWwKZGVzY3JpcHRp\
b246IEJpdG5hbWkgV29yZFByZXNzIHdpdGggUEhQNyBhbmQgTXlTUUwgQW5zaWJsZSBQbGF5Ym9v\
ayBCdW5kbGUKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNw\
bGF5TmFtZTogQml0bmFtaSBXb3JkUHJlc3Mgd2l0aCBQSFA3IGFuZCBNYXJpYURCIChBUEIpCiAg\
ZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvbXlz\
cWwtNTctcmhlbDcnCiAgICAtICdkb2NrZXIuaW8vamF2c2FsZ2FyL2JpdG5hbWktd29yZHByZXNz\
LXJoZWwnCiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly9kb2NzLmJpdG5hbWkuY29tL2luc3Rh\
bGxlci9hcHBzL3dvcmRwcmVzcy8KICBpbWFnZVVybDogaHR0cHM6Ly9kN3VtcWljcGk3MjYzLmNs\
b3VkZnJvbnQubmV0L2ltZy9wcm9kdWN0LzdkNDI2Y2I3LTk1MjItNGRkNy1hNTZiLTU1ZGQ4Y2Mx\
YzhkMC9iNzNiOWYwNS0wYTk2LTRjYjEtOTEzNi05M2U1ZTc2MzY0ZmIucG5nCiAgcHJvdmlkZXJE\
aXNwbGF5TmFtZTogQml0bmFtaQpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0\
aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIFdvcmRQcmVzcyB3aXRoIHBocC1mcG0gNy4y\
LCBBcGFjaGUgYW5kIE1hcmlhREIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAg\
cGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBibG9nX25hbWUKICAgICAgICBkZWZhdWx0OiAiTXkg\
YmxvZyIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogQmxvZyBUaXRsZQogICAg\
ICAgIGRlc2NyaXB0aW9uOiBUaXRsZSBvZiB5b3VyIGJsb2cKICAgICAgLSBuYW1lOiB3cF91c2Vy\
bmFtZQogICAgICAgIGRlZmF1bHQ6IHVzZXIKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlf\
XSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IFdvcmRQcmVzcyBhZG1pbiB1c2VybmFtZQogICAgICAgIGRlc2NyaXB0aW9uOiBXb3Jk\
UHJlc3MgYWRtaW4gdXNlcm5hbWUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6\
IHdwX3Bhc3N3b3JkCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1th\
LXpBLVowLTlfXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBXb3JkUHJl\
c3MgYWRtaW4gcGFzc3dvcmQKICAgICAgICBkZXNjcmlwdGlvbjogV29yZFByZXNzIGFkbWluIHBh\
c3N3b3JkCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiB0\
cnVlCiAgICAgIC0gbmFtZTogZGJfbmFtZQogICAgICAgIGRlZmF1bHQ6IGRhdGFiYXNlCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9d\
K1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBuYW1lCiAgICAgICAgZGVz\
Y3JpcHRpb246IERhdGFiYXNlIG5hbWUKICAgICAgLSBuYW1lOiBkYl91c2VyCiAgICAgICAgZGVm\
YXVsdDogZGJ1c2VyCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16\
QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVowLTlfXSokIgogICAgICAgIHRpdGxlOiBEYXRhYmFz\
ZSB1c2VyCiAgICAgICAgZGVzY3JpcHRpb246IERhdGFiYXNlIHVzZXIKICAgICAgLSBuYW1lOiBk\
Yl9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBw\
YXNzd29yZAogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBwYXNzd29yZAogICAgICAgIGRp\
c3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6\
IHZvbHVtZV9zaXplCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICcxR2knCiAg\
ICAgICAgZW51bTogWycxR2knLCAnNUdpJywgJzEwR2knXQogICAgICAgIHRpdGxlOiBEYXRhYmFz\
ZSB2b2x1bWUgc2l6ZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCg=="





COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
